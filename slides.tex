\documentclass{beamer}
\usepackage[utf8]{inputenc}
 
 
%% Title
\title{AWS Lambda}
\subtitle{What It Is and Why It's Terrible}
\author{Robert D. French}
\date{February 2020} 
 
\begin{document}
\frame{\titlepage}

\begin{frame}
	\frametitle{About This Talk}
	\centering
	\includegraphics[scale=0.35]{cloud.jpg}
\end{frame}

\begin{frame}
	\frametitle{The Allegations}
	The \emph{Serverless} ethos is a response to alleged shortcomings of traditional
	web apps:
	\begin{itemize}
		\pause \item Patching servers is hard.
		\pause \item Scaling servers is hard.
		\pause \item Money spent on idle VMs is wasted.
	\end{itemize}
	\pause
	We'll accept these claims for the moment, because they motivate Lambda's design.
\end{frame}

\begin{frame}
	\frametitle{Some Skepticism}
	\begin{itemize}
		\item If your team is bad at these, will a new platform will be easier?
		\pause \item If you are willing to learn Serverless, why not double down
			on your existing platform?
	\end{itemize}
\end{frame}

\section{Traditional Web Apps}
\frame{\sectionpage}

\begin{frame}
	\frametitle{\insertsection : Overview}
	\begin{itemize}
		\pause \item CGI - \texttt{fork() + exec()} for each request
		\pause \item FastCGI - Single \texttt{fork() + exec()} w/o big rewrite
		\pause \item HTTP Proxy - Application is also a small web server
	\end{itemize}
	\pause For our purposes, we can treat FastCGI and HTTP Proxy as equivalent.
\end{frame}

\begin{frame}
	\frametitle{\insertsection : CGI}
	\begin{itemize}
		\pause \item \texttt{exec()} one process per request
		\pause \item new process runs as the \texttt{httpd} user
			\begin{itemize}
				\item Let's ignore \texttt{suexec} for now
			\end{itemize}
		\pause \item Access to secrets, etc through filesystem permissions
		\pause \item No requests $\implies$ no load on server
		\pause \item Rapid connect + query + disconnect is hard on RDBMS
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{\insertsection : FastCGI}
	\begin{itemize}
		\pause \item Goal: Minimize \texttt{fork() + exec()} w/o major rewrite
		\pause \item Method of Choice for PHP, otherwise out of fashion
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{\insertsection : WSGI}
	\begin{itemize}
		\pause \item Guido re-invented FastCGI for some reason\ldots
		\pause \item Requires a supporting webserver module
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{\insertsection : FastCGI / WSGI / Reverse Proxy}
	\begin{itemize}
		\pause \item Long-running application process handles many requests
		\pause \item Application can run as its own user (separate from webserver)
		\pause \item Can be managed by the host's init framework
			\begin{itemize}
				\item providing access to secrets, sockets at launch time
			\end{itemize}
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{\insertsection : FastCGI / WSGI / Reverse Proxy}
	\begin{itemize}
		\pause \item Scripting languages, usually single-threaded
		\pause \item Concurrency planning is on you (init framework can help)
		\pause \item This is the type of client Relational Databases like
	\end{itemize}
\end{frame}

\section{Lambda}
\frame{\sectionpage}

\begin{frame}
	\frametitle{\insertsection : IAM Roles}
	\begin{itemize}
		\pause \item One role to deploy the lambda (Jenkins)
			\begin{itemize}
				\item What does Jenkins need to create / change?
			\end{itemize}
		\pause \item One role for \alert{AWS to Assume} when running your lambda
			\begin{itemize}
				\item What does \emph{this lambda} need to touch?
			\end{itemize}
		\pause \item Tradeoff: keeping roles minimal vs. minimizing \# of roles
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{\insertsection : Under the Hood}
	\begin{itemize}
		\pause \item Pre-2018, implementation details were scarce
		\pause \item Quick booting rules out virtualization
		\pause \item Zip files + Defined entry points\ldots maybe a container?
		\pause \item \ldots did Amazon make User Namespaces trustworthy?
	\end{itemize}
\end{frame}
 
\section{Firecracker}
\frame{\sectionpage}

\begin{frame}
	\frametitle{\insertsection : Overview}
	\begin{itemize}
		\pause \item Not containers!
		\pause \item Tiny VMs, designed for rapid booting
		\pause \item Still holding out hope for User Namespaces\ldots
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{\insertsection : Cold Start}
	``A single Firecracker microVM can be launched in \alert{125 ms}\ldots You'd be
	hard-pressed to find something faster.''
	- \href{https://www.techrepublic.com/article/aws-firecracker-10-things-every-tech-pro-should-know/}{Tech Republic}
\end{frame}

 
\section{Criticism}
\frame{\sectionpage}

\begin{frame}
	Include rebuttle from @myoung34 here
\end{frame}

\end{document}
